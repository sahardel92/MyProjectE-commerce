{% extends 'base.html.twig' %}

{% block title %}RÃ©sultats pour "{{ query }}"{% endblock %}

{% block body %}
<div class="container my-5">

    {% if query %}
        <h2 class="mb-3">RÃ©sultats pour : <strong>{{ query }}</strong></h2>
        <p class="text-muted">{{ products|length }} produit(s) trouvÃ©(s)</p>
    {% else %}
        <h2 class="mb-3">Recherche</h2>
    {% endif %}

    <div class="products-grid mt-4">
        {% for product in products %}
            <div class="product-card">

                <a href="{{ path('app_home_product_show', {'id': product.id}) }}">
                    <img src="{{ asset('uploads/images/' ~ product.image) }}" 
                         alt="{{ product.name }}">
                </a>

                <div class="p-3">
                    <h5>{{ product.name }}</h5>
                    <p class="text-muted small">{{ product.description|slice(0, 60) }}...</p>
                    <p class="fw-bold text-success">{{ product.price }} â‚¬</p>

                    <a href="{{ path('app_cart_add', {'id': product.id}) }}" 
                       class="btn btn-success w-100">
                        ðŸ›’ Ajouter au panier
                    </a>
                </div>

            </div>
        {% else %}
            <p class="text-muted">Aucun produit ne correspond Ã  votre recherche.</p>
        {% endfor %}
    </div>

</div>
{% endblock %}
