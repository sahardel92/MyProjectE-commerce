{% extends 'base.html.twig' %}

{% block title %}Connexion{% endblock %}

{% block body %}
<div class="min-vh-100 d-flex align-items-center justify-content-center" 
     style="background: linear-gradient(135deg, #e9f7ef, #f9fdf9);">
    <div class="row w-100 justify-content-center align-items-center px-3">

        <!-- Image à gauche -->
        <div class="col-md-5 d-none d-md-block text-center">
            <img src="{{ asset('uploads/images/login.png') }}" 
                 alt="Connexion illustration" 
                 class="img-fluid rounded-4 shadow-lg"
                 style="max-width: 90%; transform: scale(1.05);">
        </div>

        <!-- Formulaire à droite -->
        <div class="col-md-5 col-lg-4 bg-white p-5 rounded-4 shadow-lg" 
             style="backdrop-filter: blur(6px);">
            
            <h1 class="text-center mb-4 fw-bold" style="color:#2e7d32;">Se connecter</h1>

            {% if error %}
                <div class="alert alert-danger text-center small py-2">
                    {{ error.messageKey|trans(error.messageData, 'security') }}
                </div>
            {% endif %}

            <form method="post">
                <div class="form-group mb-3">
                    <label for="inputEmail" class="form-label fw-semibold">Adresse e-mail</label>
                    <input type="email" value="{{ last_username }}" name="email" id="inputEmail"
                        class="form-control rounded-3 shadow-sm border-success-subtle"
                        placeholder="exemple@mail.com" autocomplete="email" required autofocus>
                </div>

                <div class="form-group mb-3">
                    <label for="inputPassword" class="form-label fw-semibold">Mot de passe</label>
                    <input type="password" name="password" id="inputPassword"
                        class="form-control rounded-3 shadow-sm border-success-subtle"
                        placeholder="Votre mot de passe" required>
                </div>

                <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

                <button class="btn btn-success btn-lg w-100 rounded-3 shadow-sm" type="submit">
                    <i class="bx bx-log-in-circle me-2"></i> Se connecter
                </button>
            </form>

            <div class="d-flex align-items-center my-3">
                <hr class="flex-grow-1">
                <span class="mx-2 text-muted small">ou</span>
                <hr class="flex-grow-1">
            </div>

            <a href="{{ path('connect_google_start') }}" 
               class="btn btn-light border shadow-sm w-100 rounded-3 d-flex align-items-center justify-content-center gap-2">
                <img src="https://developers.google.com/identity/images/g-logo.png" 
                     alt="Google" width="20">
                <span class="fw-semibold">Se connecter avec Google</span>
            </a>

            <p class="text-center text-muted mt-4 mb-0 small">
                Pas encore de compte ? 
                <a href="{{ path('app_register') }}" class="text-success fw-semibold text-decoration-none">
                    Inscrivez-vous ici
                </a>
            </p>
        </div>
    </div>
</div>
{% endblock %}

